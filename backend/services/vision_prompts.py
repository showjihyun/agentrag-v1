"""
Vision LLM Prompts for Multimodal RAG

표 데이터 추출에 최적화된 프롬프트
"""

# 고급 표 추출 프롬프트
ENHANCED_TABLE_EXTRACTION_PROMPT = """이미지를 매우 정확하고 상세하게 분석하여 다음을 수행해주세요:

1. **표(테이블) 데이터 추출** (표가 있는 경우) - 최우선 과제:
   ⚠️ 중요: 모든 셀의 내용을 빠짐없이 추출해야 합니다!
   
   a) 표 구조 파악:
      - 행(row) 수와 열(column) 수 확인
      - 헤더 행 식별
      - 병합된 셀 확인
   
   b) 데이터 추출:
      - 각 셀의 텍스트를 정확히 읽기
      - 숫자, 단위, 특수문자 모두 포함
      - 빈 셀도 명시
   
   c) 출력 형식:
      - 마크다운 표 형식 사용
      - 복잡한 표는 키-값 쌍으로도 표현
   
   예시 (장비 사양서):
   | 항목 | 사양 | 비고 |
   |------|------|------|
   | CPU | Intel Core i7-12700K | 8코어 16스레드 |
   | GPU | NVIDIA RTX 3080 | 10GB GDDR6X |
   | RAM | 32GB DDR4 | 3200MHz |
   | 저장장치 | SSD 1TB NVMe | Samsung 980 PRO |
   
   또는:
   
   [항목: CPU]
   - 모델: Intel Core i7-12700K
   - 코어: 8코어 16스레드
   - 기본 클럭: 3.6GHz
   - 최대 클럭: 5.0GHz
   
   [항목: GPU]
   - 모델: NVIDIA GeForce RTX 3080
   - 메모리: 10GB GDDR6X
   - 메모리 속도: 19Gbps

2. **차트/그래프 분석** (차트가 있는 경우):
   a) 차트 식별:
      - 차트 유형: 막대/선/원형/산점도/히스토그램 등
      - 제목과 부제목
   
   b) 축 정보:
      - X축: 레이블, 범위, 단위
      - Y축: 레이블, 범위, 단위
      - 보조 축 (있는 경우)
   
   c) 데이터 추출:
      - 모든 데이터 포인트의 값
      - 범례 정보
      - 주석과 레이블
   
   d) 분석:
      - 주요 추세 (증가/감소/변동)
      - 최대값/최소값
      - 특이사항
      - 인사이트
   
   예시:
   [차트 분석]
   - 차트 유형: 막대 그래프
   - 제목: 2023년 분기별 매출 현황
   - X축: 분기 (Q1, Q2, Q3, Q4)
   - Y축: 매출액 (억원)
   - 데이터:
     * Q1: 150억원
     * Q2: 180억원
     * Q3: 210억원
     * Q4: 240억원
   - 추세: 분기별 지속적 증가 (평균 20% 성장)
   - 인사이트: Q4에 가장 높은 매출 달성

3. **일반 텍스트 추출**:
   - 문서 제목, 부제목
   - 문서 번호, 버전, 날짜
   - 본문 텍스트
   - 주석, 각주
   - 워터마크, 헤더, 푸터

4. **이미지 전체 설명**:
   - 문서의 목적과 용도
   - 주요 내용 요약
   - 대상 독자

출력 형식:
---
[표 데이터] (표가 있는 경우)
(위 예시 참고)

[차트 분석] (차트가 있는 경우)
(위 예시 참고)

[일반 텍스트]
(모든 텍스트)

[이미지 설명]
(전체 요약)

[검색 키워드]
(주요 키워드 나열)
---

⚠️ 주의사항:
- 표의 모든 셀을 빠짐없이 추출하세요
- 숫자와 단위를 정확히 구분하세요
- 한글, 영문, 숫자, 특수문자 모두 정확히 인식하세요
- 불명확한 부분은 [불명확]으로 표시하세요
"""


# 간단한 표 추출 프롬프트 (빠른 처리용)
SIMPLE_TABLE_EXTRACTION_PROMPT = """이미지의 표 데이터를 추출해주세요:

1. 표가 있다면 마크다운 형식으로 변환
2. 모든 셀의 내용을 정확히 추출
3. 헤더와 데이터 구분

출력:
| 열1 | 열2 |
|-----|-----|
| 값1 | 값2 |
"""


# 차트 분석 프롬프트
CHART_ANALYSIS_PROMPT = """이미지의 차트/그래프를 분석해주세요:

1. 차트 유형 식별
2. 축 정보 (레이블, 단위)
3. 모든 데이터 포인트 추출
4. 추세와 인사이트

출력:
[차트 분석]
- 유형: ...
- 데이터: ...
- 추세: ...
"""


def get_vision_prompt(prompt_type: str = "enhanced") -> str:
    """
    Vision LLM 프롬프트 가져오기
    
    Args:
        prompt_type: 프롬프트 유형
            - "enhanced": 고급 표 추출 (기본값)
            - "simple": 간단한 표 추출
            - "chart": 차트 분석
    
    Returns:
        프롬프트 문자열
    """
    prompts = {
        "enhanced": ENHANCED_TABLE_EXTRACTION_PROMPT,
        "simple": SIMPLE_TABLE_EXTRACTION_PROMPT,
        "chart": CHART_ANALYSIS_PROMPT
    }
    
    return prompts.get(prompt_type, ENHANCED_TABLE_EXTRACTION_PROMPT)
