# Core Framework
fastapi>=0.109.0
uvicorn[standard]>=0.27.0
pydantic>=2.7.4,<3.0.0
pydantic-settings>=2.1.0
python-multipart>=0.0.6

# LLM and Agent Orchestration (Numpy 2.x compatible - Fixed versions)
langchain==0.3.19  # Required by langchain-community 0.3.18
langchain-community==0.3.18
langchain-core==0.3.37  # Required by langchain-community 0.3.18
langgraph==0.2.55
langsmith==0.3.45  # Required by langchain-core 0.3.37+
litellm==1.17.9

# Embeddings (Numpy 2.x compatible - Fixed versions)
transformers==4.44.2  # Hugging Face transformers (stable, numpy 2.x compatible)
sentence-transformers==3.0.1  # Sentence embeddings (stable, numpy 2.x compatible)
torch>=2.0.0
torchvision>=0.15.0

# Hybrid Search
rank-bm25==0.2.2

# Korean Language Support (optional but recommended)
konlpy==0.6.0

# Reranking (Cross-encoder)
# Note: This will download additional models (~100MB)
# Comment out if you don't need reranking
# sentence-transformers already includes CrossEncoder

# Vector Database
pymilvus==2.3.5

# Database (Phase 5)
sqlalchemy==2.0.23
psycopg2-binary==2.9.9
alembic==1.12.1

# Authentication (Phase 5)
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4

# Cache and Session
redis==5.0.1

# MCP Integration
# Note: MCP servers are optional and can be run separately
# If you need MCP functionality, uncomment the line below:
# mcp>=1.0.0
# For now, MCP functionality will be disabled if not installed

# Web Search
duckduckgo-search==4.1.1

# Utilities
python-dotenv==1.0.0
aiofiles==23.2.1
pypdf2==3.0.1
opendataloader-pdf>=0.1.0  # For better PDF table extraction
python-docx==1.1.2  # Required by docling 2.14.0
python-pptx==1.0.2  # For PowerPoint file parsing (required by docling 2.14.0)
olefile==0.47  # For HWP file parsing
pyhwp==0.1b12  # Better HWP parsing (optional, may have compatibility issues)
psutil==5.9.8  # For system monitoring

# HTTP and Web
httpx==0.26.0  # Async HTTP client
requests==2.32.3  # HTTP library (required by docling 2.14.0)
beautifulsoup4==4.12.3  # HTML parsing (if needed)

# Scientific Computing (Numpy 2.x REQUIRED - Fixed version)
numpy==2.1.3  # Stable numpy 2.x version
scikit-learn==1.5.2  # For cosine similarity and ML utilities

# Image Processing (OCR - Fixed versions)
easyocr==1.7.2  # Multi-language OCR with GPU support
pillow==10.4.0  # Image processing library
opencv-python==4.10.0.84  # Computer vision (numpy 2.x compatible)
nest-asyncio==1.6.0  # Nested event loop support for async OCR

# Advanced Document Processing (Docling - Fixed versions)
docling==2.14.0  # IBM Research document processing (tables, charts, layout)
pdf2image==1.17.0  # PDF to image conversion for Docling
poppler-utils; platform_system != "Windows"  # PDF rendering (Linux/Mac)

# Knowledge Graph (Priority 4)
networkx==3.2.1  # For knowledge graph and entity relationships

# Retry and Resilience
tenacity==8.2.3  # Retry logic for LLM calls

# Testing
pytest==7.4.0
pytest-asyncio==0.21.1
pytest-cov==4.1.0
pytest-mock==3.12.0

# Language detection for metadata extraction
langdetect==1.0.9

# Character encoding detection
chardet==5.2.0

# Excel file support
openpyxl==3.1.5  # For XLSX files (required by docling 2.14.0)
xlrd==2.0.1  # For XLS files

# Production server
gunicorn==21.2.0  # WSGI server for production
