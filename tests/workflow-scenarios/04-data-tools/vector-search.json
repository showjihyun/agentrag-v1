{
  "name": "Vector Search - Semantic Search Test",
  "description": "Test semantic search in Milvus vector database",
  "category": "data-tools",
  "workflow": {
    "nodes": [
      {
        "id": "start_1",
        "type": "start",
        "position": { "x": 100, "y": 100 },
        "data": {
          "label": "Start"
        }
      },
      {
        "id": "vector_1",
        "type": "tool",
        "position": { "x": 300, "y": 100 },
        "data": {
          "label": "Search Documents",
          "tool_id": "vector_search",
          "parameters": {
            "query": "{{input.search_query}}",
            "collection_name": "documents",
            "top_k": 5,
            "score_threshold": 0.7
          }
        }
      },
      {
        "id": "end_1",
        "type": "end",
        "position": { "x": 500, "y": 100 },
        "data": {
          "label": "End"
        }
      }
    ],
    "edges": [
      {
        "id": "e1",
        "source": "start_1",
        "target": "vector_1"
      },
      {
        "id": "e2",
        "source": "vector_1",
        "target": "end_1"
      }
    ]
  },
  "test_cases": [
    {
      "name": "Search for AI documents",
      "input": {
        "search_query": "artificial intelligence and machine learning"
      },
      "expected_output": {
        "results_count": { "min": 1, "max": 5 },
        "has_scores": true,
        "min_score": 0.7
      }
    },
    {
      "name": "Search for technical docs",
      "input": {
        "search_query": "how to configure database connection"
      },
      "expected_output": {
        "results_count": { "min": 1, "max": 5 }
      }
    }
  ],
  "assertions": [
    {
      "type": "response_time",
      "max_seconds": 2
    },
    {
      "type": "results_not_empty"
    },
    {
      "type": "scores_above_threshold",
      "threshold": 0.7
    }
  ],
  "prerequisites": [
    "Milvus must be running",
    "Collection 'documents' must exist with data"
  ]
}
