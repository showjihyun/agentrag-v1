{
  "name": "Real World - Customer Support Automation",
  "description": "Automated customer support workflow with AI analysis and routing",
  "category": "real-world",
  "workflow": {
    "nodes": [
      {
        "id": "webhook_1",
        "type": "webhook_trigger",
        "position": { "x": 100, "y": 300 },
        "data": {
          "label": "Customer Request",
          "parameters": {
            "webhook_id": "customer_support"
          }
        }
      },
      {
        "id": "ai_classify",
        "type": "tool",
        "position": { "x": 300, "y": 300 },
        "data": {
          "label": "Classify Request",
          "tool_id": "openai_chat",
          "parameters": {
            "model": "gpt-4-turbo-preview",
            "system_message": "You are a customer support classifier. Classify the request into: technical, billing, general. Return only the category.",
            "prompt": "Customer message: {{input.message}}\n\nCategory:",
            "temperature": 0.1,
            "max_tokens": 50
          }
        }
      },
      {
        "id": "switch_1",
        "type": "switch",
        "position": { "x": 500, "y": 300 },
        "data": {
          "label": "Route by Category",
          "parameters": {
            "variable": "input.category",
            "cases": [
              {"value": "technical", "label": "Technical"},
              {"value": "billing", "label": "Billing"},
              {"value": "general", "label": "General"}
            ]
          }
        }
      },
      {
        "id": "vector_technical",
        "type": "tool",
        "position": { "x": 700, "y": 150 },
        "data": {
          "label": "Search Tech Docs",
          "tool_id": "vector_search",
          "parameters": {
            "query": "{{input.message}}",
            "collection_name": "technical_docs",
            "top_k": 3
          }
        }
      },
      {
        "id": "vector_billing",
        "type": "tool",
        "position": { "x": 700, "y": 300 },
        "data": {
          "label": "Search Billing Info",
          "tool_id": "vector_search",
          "parameters": {
            "query": "{{input.message}}",
            "collection_name": "billing_docs",
            "top_k": 3
          }
        }
      },
      {
        "id": "ai_general",
        "type": "tool",
        "position": { "x": 700, "y": 450 },
        "data": {
          "label": "General Response",
          "tool_id": "openai_chat",
          "parameters": {
            "model": "gpt-4-turbo-preview",
            "system_message": "You are a helpful customer support agent.",
            "prompt": "Customer: {{input.message}}\n\nProvide a helpful response:",
            "temperature": 0.7
          }
        }
      },
      {
        "id": "merge_1",
        "type": "merge",
        "position": { "x": 900, "y": 300 },
        "data": {
          "label": "Merge Responses",
          "parameters": {
            "mode": "any",
            "input_count": 3
          }
        }
      },
      {
        "id": "slack_notify",
        "type": "tool",
        "position": { "x": 1100, "y": 300 },
        "data": {
          "label": "Notify Team",
          "tool_id": "slack",
          "parameters": {
            "action": "send_message",
            "channel": "#support",
            "message": "ðŸŽ« New Support Request\n\n*Category*: {{input.category}}\n*Message*: {{input.message}}\n*Response*: {{input.response}}",
            "bot_token": "${SLACK_BOT_TOKEN}"
          }
        }
      },
      {
        "id": "end_1",
        "type": "end",
        "position": { "x": 1300, "y": 300 },
        "data": {
          "label": "End"
        }
      }
    ],
    "edges": [
      {"id": "e1", "source": "webhook_1", "target": "ai_classify"},
      {"id": "e2", "source": "ai_classify", "target": "switch_1"},
      {"id": "e3", "source": "switch_1", "target": "vector_technical", "sourceHandle": "technical"},
      {"id": "e4", "source": "switch_1", "target": "vector_billing", "sourceHandle": "billing"},
      {"id": "e5", "source": "switch_1", "target": "ai_general", "sourceHandle": "general"},
      {"id": "e6", "source": "vector_technical", "target": "merge_1"},
      {"id": "e7", "source": "vector_billing", "target": "merge_1"},
      {"id": "e8", "source": "ai_general", "target": "merge_1"},
      {"id": "e9", "source": "merge_1", "target": "slack_notify"},
      {"id": "e10", "source": "slack_notify", "target": "end_1"}
    ]
  },
  "test_cases": [
    {
      "name": "Technical support request",
      "input": {
        "message": "My API is returning 500 errors"
      },
      "expected_output": {
        "category": "technical",
        "response_contains": ["API", "error", "500"]
      }
    },
    {
      "name": "Billing inquiry",
      "input": {
        "message": "I was charged twice this month"
      },
      "expected_output": {
        "category": "billing"
      }
    }
  ],
  "assertions": [
    {
      "type": "response_time",
      "max_seconds": 15
    },
    {
      "type": "correct_routing"
    },
    {
      "type": "slack_notification_sent"
    }
  ]
}
