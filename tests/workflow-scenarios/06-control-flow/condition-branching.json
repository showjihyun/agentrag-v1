{
  "name": "Condition - Branching Test",
  "description": "Test conditional branching based on input values",
  "category": "control-flow",
  "workflow": {
    "nodes": [
      {
        "id": "start_1",
        "type": "start",
        "position": { "x": 100, "y": 200 },
        "data": {
          "label": "Start"
        }
      },
      {
        "id": "condition_1",
        "type": "condition",
        "position": { "x": 300, "y": 200 },
        "data": {
          "label": "Check Score",
          "parameters": {
            "operator": "greater_than",
            "variable": "input",
            "condition": "input.get('score', 0) >= 70"
          }
        }
      },
      {
        "id": "python_pass",
        "type": "tool",
        "position": { "x": 500, "y": 100 },
        "data": {
          "label": "Pass Message",
          "tool_id": "python_code",
          "parameters": {
            "code": "return {'result': 'PASS', 'message': f'Score {input.get(\"score\")} is passing!'}"
          }
        }
      },
      {
        "id": "python_fail",
        "type": "tool",
        "position": { "x": 500, "y": 300 },
        "data": {
          "label": "Fail Message",
          "tool_id": "python_code",
          "parameters": {
            "code": "return {'result': 'FAIL', 'message': f'Score {input.get(\"score\")} is failing.'}"
          }
        }
      },
      {
        "id": "end_1",
        "type": "end",
        "position": { "x": 700, "y": 200 },
        "data": {
          "label": "End"
        }
      }
    ],
    "edges": [
      {
        "id": "e1",
        "source": "start_1",
        "target": "condition_1"
      },
      {
        "id": "e2",
        "source": "condition_1",
        "target": "python_pass",
        "sourceHandle": "true"
      },
      {
        "id": "e3",
        "source": "condition_1",
        "target": "python_fail",
        "sourceHandle": "false"
      },
      {
        "id": "e4",
        "source": "python_pass",
        "target": "end_1"
      },
      {
        "id": "e5",
        "source": "python_fail",
        "target": "end_1"
      }
    ]
  },
  "test_cases": [
    {
      "name": "Passing score",
      "input": {
        "score": 85
      },
      "expected_output": {
        "result": "PASS",
        "message_contains": "passing"
      }
    },
    {
      "name": "Failing score",
      "input": {
        "score": 45
      },
      "expected_output": {
        "result": "FAIL",
        "message_contains": "failing"
      }
    },
    {
      "name": "Boundary score (70)",
      "input": {
        "score": 70
      },
      "expected_output": {
        "result": "PASS"
      }
    }
  ],
  "assertions": [
    {
      "type": "response_time",
      "max_seconds": 3
    },
    {
      "type": "correct_branch_taken"
    },
    {
      "type": "no_errors"
    }
  ]
}
